{% extends 'base.html' %}
{% block content %}

<div class="container-fluid">
    <div class="row border">
      <div class="col-xs-4">
        <!--
        User Profile Sidebar by @keenthemes
        A component of Metronic Theme - #1 Selling Bootstrap 3 Admin Theme in Themeforest: http://j.mp/metronictheme
        Licensed under MIT
        -->

        <div class="container" data-spy="affix">
            <div class="row profile">
                <div class="col-xs-3">
                    <div class="profile-sidebar">
                        <!-- SIDEBAR USERPIC -->
                        <div class="profile-userpic">
                            <img src="glitz/8722293ab9b31a8daa7a6607f78ab9a5--grunge-hair-hair-images.jpg" class="img-responsive" alt="">
                        </div>
                        <!-- END SIDEBAR USERPIC -->
                        <!-- SIDEBAR USER TITLE -->
                        <div class="profile-usertitle">
                            <div class="profile-usertitle-name">
                                {{ user_name }}
                            </div>
                            <div class="profile-usertitle-job">
                                Fashion Fan!
                            </div>
                        </div>
                        <!-- END SIDEBAR USER TITLE -->
                        <!-- SIDEBAR MENU -->
                        <div class="profile-usermenu">
                            <ul class="nav">
                                <li class="active">
                                    <a href="#">
                                    <i class="glyphicon glyphicon-home"></i>
                                    Overview </a>
                                </li>
                                <li>
                                    <a href="#">
                                    <i class="glyphicon glyphicon-user"></i>
                                    Account Settings </a>
                                </li>
                                <li>
                                    <a href="#" target="_blank">
                                    <i class="glyphicon glyphicon-leaf"></i>
                                    My Glitz </a>
                                </li>
                                <li>
                                    <a href="#">
                                    <i class="glyphicon glyphicon-flag"></i>
                                    Help </a>
                                </li>
                            </ul>
                        </div>
                        <!-- END MENU -->
                    </div>
                </div>
            </div>
        </div>
      </div>

      <div class="col-xs-6 border">
                    
        <form action="/upload_glitz" id="formUploadGlitz" method="post" enctype="multipart/form-data">
            <div class="container-fluid">
                <div class="row" id="imagePreviewWindow" style="display: none;">
                    <div class="col-xs-4">
                        <div class="thumbnail">
                            <img id="imagePreviewControl" alt="" style="height: 180px; width: 100%; display: block;">   
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-9">
                        <input type="text" class="form-control" placeholder="Message" id="inputSuccess2" aria-describedby="inputSuccess2Status">
                    </div>
                    <div class="col-xs-1" align="left">
                      <button type="button" id="buttonImagePicker" class="btn btn-default btn-sm">
                        <span class="glyphicon glyphicon-camera"></span>
                      </button>
                    </div>
                    <div class="col-xs-1" align="left">
                      <button type="button" name="buttonSubmitGlitz" id="buttonSubmitGlitz" class="btn btn-default btn-sm">
                        <span class="glyphicon glyphicon-arrow-up"></span> Gllitz
                      </button>
                    </div>
                </div>
            </div>
            <input type="file" style="display: none;" onchange="showPicture(this);" name="glitzToUpload" id="fileToUpload"/>
                
        </form>
        <br/>
        <div class="">
            <div class="row">
                <div class="col-xs-0"></div>
                <div class="col-xs-10">
                    {% for glitz in glitz_feeds %}
                    <div class="container-fluid bigGlitzItemBackground">
                        <br/>
                        <div class="row">
                            <div class="col-xs-2">
                                <div class="text-center">
                                    <img class="comments-profile-userpic text-center" src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png">
                                </div><!-- /thumbnail -->
                            </div>
                            <div class="col-xs-10">
                                <a onclick="showProfileModal('{{ glitz[4] }}');">  
                                   <b> {{ glitz[4] }} </b>
                                </a>
                                <span class="text-muted"> posted few moments ago</span>
                            </div>
                        </div>
                        <div class="row text-center">
                            <a href="/view_glitz/{{ glitz[1] }}">
                                <img src="{{ glitz[0] }}" class="glitz_image"> </br>
                                {{ glitz[2]}} comments
                            </a>                        
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="col-xs-1"></div>
            </div>
        </div>

        <!-- {glitz_id:(glitz_path, user_id, name, posted_on, [comment1, comment2,......, comment'n])} -->
        <!-- [glitz_path, glitz_id, count, user_id, name, posted_on] -->
        <!-- <table align="center" class="border">
           {% for glitz in glitz_feeds %}
            <tr>
                <td>
                    <table>
                        <tr>
                            <td>
                                <a href="/{{ glitz[3] }}">  
                                   <b> {{ glitz[4] }} </b>
                                </a>
                            </td>
                        </tr>
                    </table>

                    <a href="/view_glitz/{{ glitz[1] }}">
                        <img src="{{ glitz[0] }}" class="glitz_image"> </br>
                        {{ glitz[2]}} comments
                    </a>
                    
                </td>
            </tr>
            <tr><td>&nbsp;</td></tr>
            {% endfor %}
        </table> -->

        <div class="text-center">
            <nav>
                <ul class="pagination pagination-sm">
                    <!-- <li class="disabled"><a href="#">&laquo;Previous</a></li> -->
                    <li>
                        <a href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li>
                        <a href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
      </div>
      <div class="col-xs-3">
      </div>
    </div>
</div>


<div class="modal fade" id="modalProfileDialog" style="width: 100%; height: 100% border: solid 1px red;">
  <div class="container-fluid">
    <div class="row">
      <div style="height:150px;">&nbsp;
      </div>
    </div>
    <div class="row">
      <div class="col-xs-5">
      </div>
      <div class="col-xs-3 nopadding">
          <div class="modal-dialog" style="width:auto;">
            <div class="modal-content">
              <div class="text-center" data-spy="affix">
                <div class="col-xs-12 nopadding">
                    <div class="profile-sidebar">
                        <!-- SIDEBAR USERPIC -->
                        <div class="profile-userpic">
                            <img id="userProfileModalDialogImage" src="glitz/8722293ab9b31a8daa7a6607f78ab9a5--grunge-hair-hair-images.jpg" class="img-responsive" alt="">
                        </div>
                        <!-- END SIDEBAR USERPIC -->
                        <!-- SIDEBAR USER TITLE -->
                        <div class="profile-usertitle">
                            <div class="profile-usertitle-name" id="userProfileModalDialogName">
                                user_name 
                            </div>
                            <div class="profile-usertitle-job">
                                Fashion Fan!
                            </div>
                        </div>
                        <!-- END SIDEBAR USER TITLE -->
                        <!-- SIDEBAR MENU -->
                        <div class="profile-usermenu">
                            <ul class="nav">
                                <li class="active">
                                    <a href="#">
                                      <i class="glyphicon glyphicon-leaf"></i>
                                    My Glitz </a>
                                </li>
                            </ul>
                        </div>
                        <!-- END MENU -->
                    </div>
                </div>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->        
      </div>
      <div class="col-xs-4">
      </div>
    </div>
  </div>
  
</div><!-- /.modal -->




<script type="text/javascript">

    $("#buttonImagePicker").click(function() {
        $("#fileToUpload").click();
    });

    $("#buttonSubmitGlitz").click(function() {
        $("#formUploadGlitz").submit();
    });

    // https://stackoverflow.com/questions/12368910/html-display-image-after-selecting-filename
    function showPicture(fileInputControl) {
        if (fileInputControl.files && fileInputControl.files[0]) {
            var reader = new FileReader();

            reader.onload = function (evt) {
                $('#imagePreviewControl').attr('src', evt.target.result);
                $('#imagePreviewWindow').show();
            };

            reader.readAsDataURL(fileInputControl.files[0]);
        }
    }

    function showProfileModal(userName) {
        $("#modalProfileDialog").modal('show');

        // Send name and details to modal dialog
        $("#userProfileModalDialogName").text(userName);
        // $("#modalDangerMessage").text(response.error);
        // $("#modalDialog").modal('show');
        // userProfileModalDialogImage
        // userProfileModalDialogName
    }

</script>

{% endblock %}