{% extends 'base.html' %}
{% block content %}

<div class="container-fluid">
    <div class="row border">
      <div class="col-xs-3">
        <!--
        User Profile Sidebar by @keenthemes
        A component of Metronic Theme - #1 Selling Bootstrap 3 Admin Theme in Themeforest: http://j.mp/metronictheme
        Licensed under MIT
        -->

        <div class="container">
            <div class="row profile">
                <div class="col-md-3">
                    <div class="profile-sidebar">
                        <!-- SIDEBAR USERPIC -->
                        <div class="profile-userpic">
                            <img src="http://keenthemes.com/preview/metronic/theme/assets/admin/pages/media/profile/profile_user.jpg" class="img-responsive" alt="">
                        </div>
                        <!-- END SIDEBAR USERPIC -->
                        <!-- SIDEBAR USER TITLE -->
                        <div class="profile-usertitle">
                            <div class="profile-usertitle-name">
                                Marcus Doe
                            </div>
                            <div class="profile-usertitle-job">
                                Developer
                            </div>
                        </div>
                        <!-- END SIDEBAR USER TITLE -->
                        <!-- SIDEBAR BUTTONS -->
                        <div class="profile-userbuttons">
                            <button type="button" class="btn btn-success btn-sm">Follow</button>
                            <button type="button" class="btn btn-danger btn-sm">Message</button>
                        </div>
                        <!-- END SIDEBAR BUTTONS -->
                        <!-- SIDEBAR MENU -->
                        <div class="profile-usermenu">
                            <ul class="nav">
                                <li class="active">
                                    <a href="#">
                                    <i class="glyphicon glyphicon-home"></i>
                                    Overview </a>
                                </li>
                                <li>
                                    <a href="#">
                                    <i class="glyphicon glyphicon-user"></i>
                                    Account Settings </a>
                                </li>
                                <li>
                                    <a href="#" target="_blank">
                                    <i class="glyphicon glyphicon-ok"></i>
                                    Tasks </a>
                                </li>
                                <li>
                                    <a href="#">
                                    <i class="glyphicon glyphicon-flag"></i>
                                    Help </a>
                                </li>
                            </ul>
                        </div>
                        <!-- END MENU -->
                    </div>
                </div>
            </div>
        </div>

        <p>
        <h1>Welcome {{ user_name }}!</h1>
        </p>
      </div>

      <div class="col-xs-6 border">
                    
        <form action="/upload_glitz" id="formUploadGlitz" method="post" enctype="multipart/form-data">
            <div class="container-fluid">
                <div class="row" id="imagePreviewWindow" style="display: none;">
                    <div class="col-xs-4">
                        <div class="thumbnail">
                            <img id="imagePreviewControl" alt="" style="height: 180px; width: 100%; display: block;">   
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-9">
                        <input type="text" class="form-control" placeholder="Message" id="inputSuccess2" aria-describedby="inputSuccess2Status">
                    </div>
                    <div class="col-xs-1" align="left">
                      <button type="button" id="buttonImagePicker" class="btn btn-default btn-sm">
                        <span class="glyphicon glyphicon-camera"></span>
                      </button>
                    </div>
                    <div class="col-xs-1" align="left">
                      <button type="button" name="buttonSubmitGlitz" id="buttonSubmitGlitz" class="btn btn-default btn-sm">
                        <span class="glyphicon glyphicon-arrow-up"></span> Gllitz
                      </button>
                    </div>
                </div>
            </div>
            <input type="file" style="display: none;" onchange="showPicture(this);" name="glitzToUpload" id="fileToUpload"/>
                
        </form>

        <!-- {glitz_id:(glitz_path, user_id, name, posted_on, [comment1, comment2,......, comment'n])} -->
        <!-- [glitz_path, glitz_id, count, user_id, name, posted_on] -->
        <table align="center" class="border">
           {% for glitz in glitz_feeds %}
            <tr>
                <td>
                    <table>
                        <tr>
                            <td>
                                <a href="/{{ glitz[3] }}">  
                                   <b> {{ glitz[4] }} </b>
                                </a>
                            </td>
                        </tr>
                    </table>

                    <a href="/view_glitz/{{ glitz[1] }}">
                        <img src="{{ glitz[0] }}" class="glitz_image"> </br>
                        {{ glitz[2]}} comments
                    </a>
                    
                </td>
            </tr>
            <tr><td>&nbsp;</td></tr>
            {% endfor %}
        </table>

        <div class="text-center">
            <nav>
                <ul class="pagination pagination-sm">
                    <!-- <li class="disabled"><a href="#">&laquo;Previous</a></li> -->
                    <li>
                        <a href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li>
                        <a href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
      </div>
      <div class="col-xs-3">
      </div>
    </div>
</div>



<script type="text/javascript">

    $("#buttonImagePicker").click(function() {
        $("#fileToUpload").click();
    });

    $("#buttonSubmitGlitz").click(function() {
        $("#formUploadGlitz").submit();
    });

    // https://stackoverflow.com/questions/12368910/html-display-image-after-selecting-filename
    function showPicture(fileInputControl) {
        if (fileInputControl.files && fileInputControl.files[0]) {
            var reader = new FileReader();

            reader.onload = function (evt) {
                $('#imagePreviewControl').attr('src', evt.target.result);
                $('#imagePreviewWindow').show();
            };

            reader.readAsDataURL(fileInputControl.files[0]);
        }
    }


</script>

{% endblock %}